<navigation hidden="{{isBarHidden}}" isIphoneX="{{isIphoneX}}" justOnePage="true" showHome="{{showHome}}" showIcon="{{showIcon}}" title=""></navigation>
<view isIphoneX="{{isIphoneX}}">
    <view class="header" style="height:{{isIphoneX?330:310}}rpx;top:{{statusBarHeight}}rpx">
        <view class="header_wrapper" style="margin-top:{{statusBarHeight+titleBarHeight}}rpx;">
            <view class="header_info_wrapper">
                <view class="userAvatarUrl">
                    <open-data type="userAvatarUrl"></open-data>
                </view>
                <view class="userNickName">
                    <open-data type="userNickName"></open-data>
                </view>
                <view class="reflect_wrapper">
                    <image class="coin" src="../../images/farm/coin.png"></image>
                    <view>{{userData.money}}</view>
                    <view bindtap="reflect" class="reflect">提现</view>
                </view>
            </view>
        </view>
    </view>
    <view bindtap="showFarm" class="notice_content">
        <view style="margin-top:{{isIphoneX?88:46}}rpx;position:relative">
            <image class="noticeImg" src="../../images/farm/notice.png"></image>
            <view class="notice_title">{{kundianPlaySet.animal_name}}</view>
        </view>
    </view>
    <movable-area style="height: {{screenHeight-180*Proportion}}px; width: 100%; background:transparent; margin-top: 180rpx;">
        <movable-view direction="all" scale="true" scaleArea="true" scaleMax="3" scaleMin="1" style="height: 120%; width: 120%;">
            <view class="mian" style="height:100%">
                <image class="main_bg" src="../../images/farm/pasture.jpg" style="height:100%"></image>
                <view bindtap="showFarm" class="{{isFullScreen?'house':'houses'}}"></view>
                <view class="fence {{isFullScreen?'top1':''}}">
                    <image class="fence-img" src="../../images/farm/fence.png"></image>
                    <animal animalList="{{animalList}}" bindanimalDetail="animalDetail" class="animal" wx:if="{{animalList.length>0}}"></animal>
                    <view bindtap="update" class="update">
                        <image class="upgrade-img" src="../../images/farm/upgrade.png"></image>
                        <view class="maxPasture">{{animalList.length}}/{{userData.shed_area}}</view>
                    </view>
                </view>
            </view>
        </movable-view>
    </movable-area>
    <view class="left_wrapper">
        <image bindtap="farm" src="../../images/farm/farm.png"></image>
        <image bindtap="checkFriend" src="../../images/farm/friend.png"></image>
        <image bindtap="adopt" src="../../images/farm/adopt.png"></image>
        <image bindtap="checkDepot" src="../../images/farm/backpack.png"></image>
        <image bindtap="monitor" src="../../images/farm/monitor2.png"></image>
    </view>
    <view class="friend_wrapper {{showFriend?'show':'hide'}}">
        <view class="headLine"></view>
        <image catchtap="checkFriend" class="closeImg" src="../../images/farm/close.png"></image>
        <view class="friend_list">
            <view class="friend_item" wx:for="{{friendList}}" wx:key="{{index}}">
                <image class="friend_item_avator" src="{{item.avatarurl}}"></image>
                <view class="friend_name">{{item.nickname}}</view>
                <view bindtap="visited" class="visited" data-frienduid="{{item.uid}}">拜访</view>
            </view>
        </view>
    </view>
    <view class="animal_wrapper {{currentInfo.animal_name?'show':'hide'}}">
        <view class="animal_detail_wrapper">
            <view class="coverView">
                <image bindtap="closeDetail" class="closeLand" src="../../images/farm/close.png"></image>
                <view class="land_detail_titl">畜牧详情</view>
            </view>
            <view class="land_detail_content">
                <view wx:if="{{currentInfo.adopt_number}}">畜牧编号：{{currentInfo.adopt_number}}</view>
                <view wx:else>畜牧名称：{{currentInfo.animal_name}}</view>
                <view>畜牧状态：{{currentInfo.status_txt}}</view>
                <view>生长进度：{{currentInfo.adopt_day}}天</view>
                <view>生长周期：{{currentInfo.cycle}}天</view>
            </view>
            <view bindtap="joinBag" class="join-bag" wx:if="{{currentInfo.status==4}}">加入背包</view>
        </view>
    </view>
    <view class="noAnimal {{noAnimal?'sacle1':'sacle0'}}" wx:if="{{animalList.length==0}}">
        <view class="coverView">
            <image bindtap="close" class="closeLand" src="../../images/farm/close.png"></image>
        </view>
        <view class="noAnimal_content">很遗憾，你还没有养殖任何动物</view>
    </view>
    <view class="depot_wrapper {{showDepot?'showDeopt':'hideDeopt'}}" style="bottom: {{showDepot&&isFullScreen?'98rpx':''}}">
        <image bindtap="checkDepot" class="closeLands" src="../../images/farm/close.png"></image>
        <view class="depot_list">
            <scroll-view class="depot_list_scroll" scrollX="true">
                <view bindtap="sale" class="depot_list_item" data-id="{{item.id}}" wx:for="{{depotList}}" wx:key="id">
                    <view class="depot_list_img_wrapper">
                        <image src="{{item.cover}}"></image>
                        <view class="item_list_name" wx:if="{{item.adopt_number}}">{{item.adopt_number}}</view>
                        <view class="item_list_name" wx:else>暂未分配</view>
                        <view class="mengban" wx:if="{{item.animation}}">
                            <view class="mengban-wrapper">
                                <view class="pie_left"></view>
                                <view class="pie_right"></view>
                            </view>
                        </view>
                    </view>
                    <view class="depot_list_item_coin" wx:if="{{item.animation}}">正在收获中</view>
                    <view class="depot_list_item_coin" wx:else>数量 1</view>
                </view>
            </scroll-view>
        </view>
    </view>
    <view class="modal" wx:if="{{state!=0}}"></view>
    <view class="proDetail_wrapper {{state==1?'show':'hide'}}">
        <view bindtap="closrProDetail" class="close_wrapper">
            <image src="../../images/farm/cha.png"></image>
        </view>
        <view class="update-title">产品详情</view>
        <view class="pro-main">
            <view class="pro-detail-img">
                <image src="{{currentAnimal.cover}}"></image>
            </view>
            <view class="pro-info-wrapper" style="padding:20rpx 0rpx;">
                <view class="pro-info-content">
                    <view class="info-item-flex">
                        <view>名　　称 :</view>
                        <view>{{currentAnimal.animal_name}}</view>
                    </view>
                    <view class="info-item-flex">
                        <view>认养编号:</view>
                        <view wx:if="{{currentAnimal.adopt_number}}">{{currentAnimal.adopt_number}}</view>
                        <view wx:else>暂未分配</view>
                    </view>
                    <view class="info-item-flex">
                        <view>生长周期 :</view>
                        <view>{{currentAnimal.adopt_day}}天</view>
                    </view>
                    <view class="info-item-flex">
                        <view>饲养日期 :</view>
                        <view>{{currentAnimal.create_time}}</view>
                    </view>
                    <view class="info-item-flex">
                        <view>卖出单价 :</view>
                        <view>{{currentAnimal.sale_price}}元 / kg</view>
                    </view>
                </view>
            </view>
            <view class="notice-content">请在成熟一周内处理! 超时所带来的后果卖家不予担负!</view>
            <view class="weight-content" style="font-size:34rpx;">总产量: {{currentAnimal.weight}} kg</view>
        </view>
        <view class="sale-footer">
            <button bindtap="post">邮寄</button>
            <button bindtap="saleItem">卖出</button>
        </view>
        <image class="baidu1" src="../../images/farm/baidu.png"></image>
        <image class="baidu2" src="../../images/farm/baidu.png"></image>
        <image class="baidu6" src="../../images/farm/baidu.png"></image>
    </view>
    <view class="sale-wrapper {{state==2?'show':'hide'}}">
        <view bindtap="closrProDetail" class="close_wrapper">
            <image src="../../images/farm/cha.png"></image>
        </view>
        <view class="update-title">商品出售</view>
        <view class="sale-content">
            <view class="sale-info-content">
                <image src="{{currentAnimal.img}}"></image>
                <view>
                    <view class="sale-info-item">
                        <view>名　称 :</view>
                        <view>{{currentAnimal.name}}</view>
                    </view>
                    <view class="sale-info-item">
                        <view>总产量 :</view>
                        <view>{{currentAnimal.num}}只</view>
                    </view>
                    <view class="sale-info-item">
                        <view>单　价 :</view>
                        <view>{{currentAnimal.price}}元/kg</view>
                    </view>
                </view>
            </view>
            <view class="sale-num">
                <input bindinput="inputWeight" placeholder="请输入售出数量" placeholderStyle="color: #CEAB67" type="number" value="{{saleNum}}"></input>
            </view>
        </view>
        <view class="sale-footer">
            <button bindtap="salePart">部分售出</button>
            <button bindtap="saleAll">全部售出</button>
        </view>
        <image class="baidu1" src="../../images/farm/baidu.png"></image>
        <image class="baidu2" src="../../images/farm/baidu.png"></image>
        <image class="baidu6" src="../../images/farm/baidu.png"></image>
    </view>
    <view class="sale-success-content {{state==3?'show':'hide'}}">
        <view bindtap="closrProDetail" class="close_wrapper">
            <image src="../../images/farm/cha.png"></image>
        </view>
        <view class="update-title" style="visibility:hidden;">成功售出</view>
        <view class="sale-content success-text">
            您已成功出售商品获得{{saleMoney}}元!
        </view>
        <view bindtap="reflect" class="wallet">进去钱包</view>
        <image class="baidu4" src="../../images/farm/baidu.png"></image>
        <image class="baidu2" src="../../images/farm/baidu.png"></image>
        <image class="baidu5" src="../../images/farm/baidu.png"></image>
    </view>
</view>
<farm_info bindShowFarm="showFarm" farmExplain="{{kundianPlaySet['animal_explain']}}" farmName="{{kundianPlaySet['animal_name']}}" wx:if="{{showFarm}}"></farm_info>
<view class="modal" wx:if="{{isUpdate}}"></view>
<view class="update-content {{isUpdate?'left1':'left2'}} {{sureUpdate?'zIndex2':'zIndex1'}}">
    <view bindtap="update" class="close_wrapper">
        <image src="../../images/farm/cha.png"></image>
    </view>
    <view class="update-title">棚升级</view>
    <view class="mian-content">
        <view class="mian-wrapper">
            <image class="updateBanner" src="../../images/farm/updateBanner.png"></image>
            <view class="area">{{userData.shed_area}}㎡棚</view>
            <view class="process-wrapper">
                <view class="logo-content">
                    <image src="../../images/farm/updateLogo.png"></image>
                </view>
                <view class="process">
                    {{animalList.length}}/{{userData.shed_area}}
                </view>
            </view>
        </view>
        <view class="note_text">升级棚,增加可养殖畜牧</view>
    </view>
    <image class="baidu1" src="../../images/farm/baidu.png"></image>
    <image class="baidu2" src="../../images/farm/baidu.png"></image>
    <image class="baidu3" src="../../images/farm/baidu.png"></image>
    <view bindtap="sureUpdate" class="update-btn">升级</view>
</view>
<view class="confrim-update {{sureUpdate?'left1':'left2'}}">
    <view bindtap="sureUpdate" class="close_wrapper">
        <image src="../../images/farm/cha.png"></image>
    </view>
    <view class="update-title">确认升级</view>
    <view class="confrim-content">
        <view>升级至{{maxPasture}}㎡需要{{kundianPlaySet.once_upgrade_area*kundianPlaySet.shed_price}}元</view>
        <view>升级成功后可增加{{kundianPlaySet.once_upgrade_area*kundianPlaySet.shed_adopt_count}}头畜牧</view>
    </view>
    <image class="baidu1" src="../../images/farm/baidu.png"></image>
    <image class="baidu2" src="../../images/farm/baidu.png"></image>
    <image class="baidu3" src="../../images/farm/baidu.png"></image>
    <view bindtap="updates" class="update-btn">确认升级</view>
</view>
